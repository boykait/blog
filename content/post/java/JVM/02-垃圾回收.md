---
title: 垃圾回收
date: 2019-09-22
categories:
 - JVM
 - java
tags:
 - JVM
 - 垃圾回收
---

1. 什么是JVM内存垃圾    
&emsp;&emsp;学习类C语言需要对内存的分配和回收都似乎必须得非常的小心翼翼，应为稍不注意就可能是一波内存泄漏问题，java中就有垃圾回收机制帮我们完成不用资源的回收工作。java垃圾回收机制能够实现垃圾的自动回收，那么必然有一种机制可以识别什么样的对象能够作为垃圾进行回收处理。首先我们还是来看一下hotspot的堆内存结构
2. 内存划分与演进    
&emsp;&emsp;直接看java7及之前同java8的对比，其实变动较大的就是去永久代操作。

![内存划分和演进对比](/images/190927-jvm_gc_1.png)

&emsp;&emsp;
3. 如何判断垃圾对象     
&emsp;&emsp;想要回收垃圾，那我们需要知道对象处于什么状态才可以当做垃圾被回收，主要有两种方法： 
```
1. 引用计数法（无法解决循环依赖问题） 
2. 可达性分析（主要方法）
```
&emsp;&emsp;可达性分析是通过GC Roots向下搜索并形成引用链，当对象不在任何一条引用链上时，则可以判定该对象是不可用的。 JVM的GC Roots主要包含如下几种：        
```
1. 虚拟机栈局部变量表中所引用的对象；    
2. 方法区中类静态属性实体的引用对象；(Java7)    
3. 方法区常量引用对象；(Java7)    
4. 本地方法栈中JNI的引用对象    
```

 
4. 回收策略
